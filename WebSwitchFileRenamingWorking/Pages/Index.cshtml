@page
@model WebSwitchFileRenamingWorking.Pages.IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div>
    <form asp-page-handler="submit" method="post" enctype="multipart/form-data">
        <label for="fileInput">Select a file:</label>
        <input type="file" id="fileInput" name="UploadedFile">
        <br/>
        @for (var i = 0; i <= 2; i++)
        {
            <input name="AreChecked" type="checkbox" value="@i" /> @Model.Titles.Pop()
            <br/>
        }
        <br/>
        <label for="LargeFileName">Large file name input: </label>
        <input type="text" id="userInput" name="LargeFileName">
        <br/>
        <br/>
        <label for="UserInputKeepFile">Keep file at location: </label>
        <input type="text" id="userInput" name="UserInputKeepFile">
        <br/>
        <br/>
        <label for="UserInputMoveFileTo">Move file to location: </label>
        <input type="text" id="userInput" name="UserInputMoveFileTo">
        <br/>
        <br/>
        <button type="submit" name="submitButton" asp-page-handler="SecondButton" onclick="saveFileInputValue()">Check File</button>
        <br/>
        <br/>
        <button>Submit</button>
    </form>

    <script>
        // Function to save the file input value before form submission
        function saveFileInputValue() {
            var fileInput = document.getElementById("fileInput");
            fileInput.setAttribute("data-saved-value", fileInput.value);
        }

        // Restore the file input value after form submission (e.g., in your OnPostSecondButton handler)
        // You can use the value stored in "data-saved-value" attribute.
    </script>
</div>
<br/>
<div>@Model.ResultStatus</div>
